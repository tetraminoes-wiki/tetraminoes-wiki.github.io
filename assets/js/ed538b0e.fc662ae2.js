"use strict";(self.webpackChunktetraminoes=self.webpackChunktetraminoes||[]).push([[980],{7107:(e,t,l)=>{l.r(t),l.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>d,frontMatter:()=>n,metadata:()=>o,toc:()=>f});var r=l(1527),i=l(7214);l(7163);const n={id:"2PC",title:"2nd PC"},a=void 0,o={id:"Perfect Clears/2PC/2PC",title:"2nd PC",description:"",source:"@site/docs/Perfect Clears/2PC/2PC.mdx",sourceDirName:"Perfect Clears/2PC",slug:"/Perfect Clears/2PC/",permalink:"/docs/Perfect Clears/2PC/",draft:!1,unlisted:!1,editUrl:"https://github.com/tetraminoes-wiki/tetraminoes/edit/main/docs/Perfect Clears/2PC/2PC.mdx",tags:[],version:"current",frontMatter:{id:"2PC",title:"2nd PC"},sidebar:"wikiSidebar",previous:{title:"1st PC",permalink:"/docs/Perfect Clears/1st PC"},next:{title:"Minimal 2nd PC",permalink:"/docs/Perfect Clears/2PC/Minimal2PC"}},s={},f=[];function c(e){return(0,r.jsx)(r.Fragment,{})}function d(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c()}},7163:(e,t,l)=>{l.d(t,{Z:()=>p});var r=l(959),n=l(3848);let a={7:4,4:7,6:2,2:6,5:5,3:3,1:1,0:0,8:8},o={L:"J",J:"L",S:"Z",Z:"S",T:"T",O:"O",I:"I"},s={spawn:"spawn",right:"left",reverse:"reverse",left:"right"};const f="fumenCanvasSmall_b468";var c=l(6312);function d(e,t){function l(t){window.localStorage.setItem(e,t),window.dispatchEvent(new StorageEvent("storage",{key:e,newValue:t}))}const i=()=>"true"===localStorage.getItem(e),n=e=>(window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)});null===i()&&l(t);return[(0,r.useSyncExternalStore)(n,i),l]}var m=l(1527);const h={I:{normal:"#42afe1",highlight:"#6ceaff",skim:"#5cc7f9"},T:{normal:"#9739a2",highlight:"#d958e9",skim:"#b94bc6"},S:{normal:"#51b84d",highlight:"#84f880",skim:"#70d36d"},Z:{normal:"#eb4f65",highlight:"#ff7f79",skim:"#f96c67"},L:{normal:"#f38927",highlight:"#ffba59",skim:"#f99e4c"},J:{normal:"#1165b5",highlight:"#339bff",skim:"#2c84da"},O:{normal:"#f6d03c",highlight:"#ffff7f",skim:"#f9df6c"},X:{normal:"#868686",highlight:"#dddddd",skim:"#bdbdbd"},Empty:{normal:"#f3f3ed"},Stroke:{normal:"#aaaaaa"}};function u(e){return i==e.x&&j==e.y}function g(e,t,l,r,i,n,a,o,s,f,c){if(e.fillStyle=n?"rgba(0, 0, 0, 0)":h.Empty.normal,e.fillRect(0,0,o,a),c){e.fillStyle="rgba(0, 0, 0, 0)",e.strokeStyle=h.Stroke.normal;for(let t=0;t<s;t++)for(let l=0;l<i;l++)e.strokeRect(t*r,a-(l+1)*r,r,r)}for(let d=0;d<s;d++)for(let n=0;n<i;n++)"_"!=t.at(d,n)&&(e.fillStyle=h[t.at(d,n)].highlight,e.fillRect(d*r,a-(n+1)*r-r/5,r,r+r/5)),null!=l&&l.positions().filter(u).length>0&&(e.fillStyle=h[l.type].highlight,e.fillRect(d*r,a-(n+1)*r-r/5,r,r+r/5));for(let d=0;d<s;d++)for(let n=0;n<i;n++)"_"!=t.at(d,n)&&(f[n]?e.fillStyle=h[t.at(d,n)].skim:e.fillStyle=h[t.at(d,n)].normal,e.fillRect(d*r,a-(n+1)*r,r,r)),null!=l&&l.positions().filter(u).length>0&&(f[n]?e.fillStyle=h[l.type].skim:e.fillStyle=h[l.type].normal,e.fillRect(d*r,a-(n+1)*r,r,r))}const p=e=>{let t,l,h,u,{fumenData:p,tilesize:C,transparent:P,numrows:k,gif:y,frameTime:w,...S}=e;c.Z.canUseDOM&&([t,l]=d("mirrorState",!1),[h,u]=d("gridState",!1));const v=r.useRef(null);let x,b;return[C,P]=function(e,t){return e||(e=32),null==t&&(t=!0),[e,t]}(C,P),(0,r.useEffect)((()=>{let e;e=t?function(e){for(let t=0;t<e.length;t++){let l=e[t]._field.field.pieces;for(let e=0;e<23;e++){let t=l.slice(10*e,10*(e+1));for(let r=0;r<10;r++)l[10*e+r]=a[t[9-r]]}let r=e[t].operation;r&&(r.type=o[r.type],r.x=9-r.x,"IO".includes(r.type)&&("reverse"==r.rotation||"left"==r.rotation&&"O"==r.type?r.x++:"spawn"!=r.rotation&&"O"!=r.type||r.x--),"SZLJT".includes(r.type)&&(r.rotation=s[r.rotation]))}return e}(n.xv.decode(p)):n.xv.decode(p);const l=e[0],r=l.field,f=l.operation,c=v.current,d=c.getContext("2d");let m=[];null==k&&(k=function(e,t,l){function r(e){return i==e.x&&j==e.y}let n=0;for(let i=0;i<e;i++)for(let e=0;e<23;e++)"_"!=t.at(i,e)&&(n=Math.max(n,e)),null!=l&&l.positions().filter(r).length>0&&(n=Math.max(n,e));return n}(10,r,f),k+=2),x=10*C,b=k*C,c.width=x,c.height=b;let u=!0;for(let t=0;t<k-1;t++){m[t]=!0;for(let e=0;e<10;e++)if("_"==r.at(e,t)){m[t]=!1,u=!1;break}}if(u&&m.fill(!1),y){let t,l=[];null==w&&(w=1e3);for(let n=0;n<e.length;n++){t=new OffscreenCanvas(x,b),g(t.getContext("2d"),e[n].field,e[n].operation,C,k,P,b,x,10,m,h),l.push(t)}let r=0;d.drawImage(l[r],0,0),r++;let i=setInterval((()=>{d.clearRect(0,0,x,b),d.drawImage(l[r],0,0),r++,r==l.length&&(r=0)}),w);return()=>{clearInterval(i)}}g(d,r,f,C,k,P,b,x,10,m,h)}),[t,h]),(0,m.jsx)("div",{style:{display:"inline"},children:(0,m.jsx)("canvas",{className:f,onClick:function(){l(!t)},fumenData:p,ref:v,width:x,height:b})})}}}]);